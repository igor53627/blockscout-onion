FROM alpine:latest

# Install nginx
RUN apk update && \
    apk add --no-cache nginx && \
    rm -rf /var/cache/apk/*

# Copy nginx configuration
COPY nginx.conf /etc/nginx/nginx.conf

# Copy static HTML files
RUN mkdir -p /var/www/html
COPY html/ /var/www/html/

# Create nginx directories and set permissions
RUN mkdir -p /var/tmp/nginx /var/lib/nginx/logs && \
    chown -R nginx:nginx /var/tmp/nginx /var/lib/nginx /var/www/html

EXPOSE 8080

CMD ["nginx", "-c", "/etc/nginx/nginx.conf"]
