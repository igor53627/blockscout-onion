# Tor Hidden Service Configuration
# This configuration sets up Tor as a relay to expose eth.blockscout.com as a hidden service

# Run as a client only (no exit node, no relay)
# Disable SOCKS5 proxy (incompatible with single-hop mode)
SocksPort 0

# Explicitly disable relay and exit functionality
ORPort 0
DirPort 0
ExitRelay 0
ExitPolicy reject *:*

# Hidden service configuration
HiddenServiceDir /var/lib/tor/hidden_service/
# Forward to nginx container
HiddenServicePort 80 nginx:8080

# Security settings
HiddenServiceVersion 3

# Performance optimization (reduces latency but removes location anonymity)
# WARNING: These settings expose your server's IP to determined adversaries
# Only use if you don't need to hide the server location
# Reduces circuit from 6 hops to 3+1 hops (significant latency improvement)
HiddenServiceSingleHopMode 1
HiddenServiceNonAnonymousMode 1

# Logging
Log notice stdout

# Additional security options
SafeLogging 1
